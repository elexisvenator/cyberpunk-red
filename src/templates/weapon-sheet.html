<form class="{{cssClass}} d-flex flex-column" autocomplete="off">
  {{!-- Weapon Sheet Navigation --}}
  <nav class="sheet-navigation tabs">
    <a class="item active" data-tab="description">{{ localize "cpred.tab.description" }}</a>
    <a class="item" data-tab="combat">{{ localize "cpred.tab.combat" }}</a>
  </nav>

  <hr />

  {{!-- Weapon Sheet Body --}}
  <div class="sheet-body">

    {{! Description tab }}
    <section class="tab description" data-tab="description">

      <div class="tab description active" data-tab="description">
        <div class="d-flex flex-wrap justify-content-evenly">
          <div class="flex-grow-1 d-flex">
            <div class="m-1 align-self-stretch avatar-small">
              <img src="{{item.img}}" data-edit="img" />
            </div>
            <div class="d-flex flex-grow-1 flex-column">
              <div class="form-floating p-1">
                <input
                  type="text"
                  class="form-control"
                  id="item.name"
                  name="name"
                  placeholder="{{localize 'cpred.sheet.name'}}"
                  value="{{item.name}}"
                />
                <label for="item.name">{{localize "cpred.sheet.name"}}</label>
              </div>
            </div>
          </div>
        </div>

        <div class="d-flex flex-column">
          <div class="editor-box p-1">
            <div class="header">Description</div>
            {{editor content=data.details.description.value target="data.details.description.value" button=true owner=owner
            editable=editable}}
          </div>
        </div>
      </div>
    </section>

    {{! Combat tab}}
    <section class="tab combat" data-tab="combat">
      <div class="tab combat" data-group="primary" data-tab="combat">
        {{! Combat relevant information and actions }} {{! Attack options }}
        <div class="d-flex p-1"><h3>Actions</h3></div>
          {{#each attackblock as |attack|}}
          <div class="d-flex flex-wrap justify-content-start align-items-baseline">
            <div class="d-flex p-1 me-auto">{{localize attack.name}}</div>
            <div class="d-flex">
              <div class="p-1">
                <button type="button" class="btn btn-outline-primary text-nowrap" data-action="{{attack.action}}_attack">
                  <i class="fas fa-dice-d6"></i> Attack
                </button>
              </div>
              <div class="p-1">
                <button type="button" class="btn btn-outline-primary text-nowrap" data-action="{{attack.action}}_damage">
                  <i class="fas fa-dice-d6"></i> Damage
                </button>
              </div>
            </div>
          </div>
          {{/each}}
        </div>

        {{! Magazine content }}
        <div class="d-flex justify-content-start">
          {{> "systems/cpred/templates/partials/actor-resource.html" resource=data.attributes.magazine resourcePath="data.attributes.magazine"
          name="cpred.sheet.magazine" }}

          <div class="d-flex p-1 ">
            <button type="button" class="btn btn-outline-primary" data-action="reload">
              {{localize "cpred.sheet.reload"}}
            </button>
          </div>
        </div>

        <hr />

        {{! Attributes }}
        <div class="d-flex p-1"><h3>Attributes</h3></div>
        <div class="d-flex flex-wrap justify-content-start">
          <div class="d-flex statblock">
            {{> "systems/cpred/templates/partials/attribute-input.html" root=item name="cpred.sheet.weapon_stats.damage" path="attributes.damage.value"}}
            {{> "systems/cpred/templates/partials/attribute-input.html" root=item name="cpred.sheet.weapon_stats.rof" path="attributes.rof.value"}}
            {{> "systems/cpred/templates/partials/attribute-input.html" root=item name="cpred.sheet.weapon_stats.hands" path="attributes.hands.value"}}
            {{> "systems/cpred/templates/partials/attribute-input.html" root=item name="cpred.sheet.cost" path="attributes.cost.value"}}
          </div>
        </div>

        <div class="d-flex flex-wrap justify-content-start">
          <div class="d-flex statblock">
            {{> "systems/cpred/templates/partials/attribute-input.html" root=item name="cpred.sheet.weapon_stats.reload_turns" path="attributes.reload_turns.value"}}
            {{> "systems/cpred/templates/partials/attribute-input.html" root=item name="cpred.sheet.weapon_stats.autofire_max" path="attributes.autofire_max.value"}}
          </div>
        </div>

        <div class="d-flex flex-wrap justify-content-start">
          {{! Weapon type }}
          <div class="d-flex flex-grow-1 flex-column p-1">
            <label for="data.attributes.type.value">{{localize "cpred.sheet.weapon_type"}}</label>
            <select class="form-select" name="data.attributes.type.value">
              {{#select data.attributes.type.value}}
              <option>{{localize "cpred.sheet.select_weapon_type"}}</option>
              {{#each weapon_types}}
              <option value="{{this}}">{{localize (join "." "cpred.sheet.weapon_types" this)}}</option>
              {{/each}} {{/select}}
            </select>
          </div>

          {{! Skill type }}
          <div class="d-flex flex-grow-1 flex-column p-1">
            <label for="data.attributes.skill.value">{{localize "cpred.sheet.combat_skill"}}</label>
            <select class="form-select" name="data.attributes.skill.value">
              {{#select data.attributes.skill.value}}
              <option>{{localize "cpred.sheet.select_weapon_skill"}}</option>
              {{#each combat_skills}}
              <option value="{{this}}">{{localize (join "." "cpred.skills" this)}}</option>
              {{/each}} {{/select}}
            </select>
          </div>
        </div>

        <hr />

        {{! Properties }}
        <div class="d-flex p-1"><h3>Properties</h3></div>
        {{#each propertiesblock as |property|}}
        <div class="d-flex flex-grow-1 p-1">
          <div class="form-check">
            <input
              type="checkbox"
              class="form-check-input"
              id="{{property.path}}"
              name="{{join "." "data" property.path}}"
              {{checked (getByPath @root.data property.path)}}
            />
            <label for="{{property.path}}" class="form-check-label">{{localize property.name}}</label>
          </div>
        </div>
        {{/each}}
      </div>
    </section>
  </div>
</form>
